 AS V1.42 Beta [Bld 298] - Source File Sonic.68k - Page 1 - 1/6/2026 16:4:10


       1/       0 :                     	include "Variables.asm"
(1)    1/       0 :                     ; It is recommended to fill padding spaces with byte variables for the 68k,
(1)    2/       0 :                     ; to avoid wasting memory space and make it uneven. With padding on,
(1)    3/       0 :                     ; the assembler will automatically fill odd words and longs to make them even and to avoid crashing.
(1)    4/       0 :                     
(1)    5/FFFF0000 :                     	org $FFFF0000
(1)    6/FFFF0000 :                     ; 68000 variables
(1)    7/FFFF0000 :                     
(1)    8/FFFF0000 :                     WRAM_Code:	ds.b $1000
(1)    9/FFFF1000 :                     
(1)   10/FFFF1000 :                     	cpu	Z80
(1)   11/FFFF1000 :                     
(1)   12/ 500 :                         	org 500h
(1)   13/ 500 :                         ; Z80 variables (away from code)
(1)   14/ 500 :                         
(1)   15/ 500 :                         sampleIndex_High:	ds 1
(1)   16/ 501 :                         sampleIndex_Low:	ds 2	; Little-endian
(1)   17/ 503 :                         
(1)   18/1000 :                         	org	1000h
(1)   19/1000 :                         sampleBuffer:	ds 512
       2/1200 :                         	include "Constants.asm"
       5/    1200 :                     	listing purecode ; We sure want the listing file, but only the final code in expanded macros
       6/    1200 :                     
       7/    1200 :                     ROM_Start
       8/    1200 :                     
       9/       0 :                     	org 0
      10/       0 :                     
      11/       0 :                     ; ================================================================
      12/       0 :                     ; 68000 vectors (with its error code in square brackets, AAAAAAxx)
      13/       0 :                     ; ================================================================
      14/       0 :                     
      15/       0 : 00FF 0000           		dc.l M68K_STACK			; Initial stack pointer value (SP value)
      16/       4 : 0000 0290           		dc.l EntryPoint			; Start of program (PC value)
      17/       8 : 0000 0200           		dc.l BusError			; Bus error							[1]
      18/       C : 0000 020A           		dc.l AddressError		; Address error						[2]
      19/      10 : 0000 0214           		dc.l IllegalInstruction	; Illegal instruction				[3]
      20/      14 : 0000 021E           		dc.l DivisionByZero		; Division by zero					[4]
      21/      18 : 0000 0228           		dc.l CHKException		; CHK exception						[5]
      22/      1C : 0000 0232           		dc.l TRAPVException		; TRAPV exception					[6]
      23/      20 : 0000 023C           		dc.l PrivilegeViolation	; Privilege violation				[7]
      24/      24 : 0000 0246           		dc.l TRACEException		; TRACE exception					[8]
      25/      28 : 0000 0250           		dc.l LineAEmulator		; Line-A emulator					[9]
      26/      2C : 0000 025A           		dc.l LineFEmulator		; Line-F emulator					[10]
      27/      30 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      28/      34 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      29/      38 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      30/      3C : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      31/      40 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      32/      44 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      33/      48 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      34/      4C : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      35/      50 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      36/      54 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      37/      58 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      38/      5C : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      39/      60 : 0000 0264           		dc.l SpuriousException	; Spurious exception				[11]
      40/      64 : 0000 026E           		dc.l InterruptRequest	; IRQ level 1						[12]
      41/      68 : 0000 026E           		dc.l InterruptRequest	; IRQ level 2						[12]
      42/      6C : 0000 026E           		dc.l InterruptRequest	; IRQ level 3 						[12]
      43/      70 : 0000 028C           		dc.l VDP_HBlank			; IRQ level 4 (horizontal retrace)
      44/      74 : 0000 026E           		dc.l InterruptRequest	; IRQ level 5						[12]
      45/      78 : 0000 028E           		dc.l VDP_VBlank			; IRQ level 6 (vertical retrace)
      46/      7C : 0000 026E           		dc.l InterruptRequest	; IRQ level 7						[12]
      47/      80 : 0000 0278           		dc.l TRAPException		; TRAP #00 exception				[13]
      48/      84 : 0000 0278           		dc.l TRAPException		; TRAP #01 exception				[13]
      49/      88 : 0000 0278           		dc.l TRAPException		; TRAP #02 exception				[13]
      50/      8C : 0000 0278           		dc.l TRAPException		; TRAP #03 exception				[13]
      51/      90 : 0000 0278           		dc.l TRAPException		; TRAP #04 exception				[13]
      52/      94 : 0000 0278           		dc.l TRAPException		; TRAP #05 exception				[13]
      53/      98 : 0000 0278           		dc.l TRAPException		; TRAP #06 exception				[13]
      54/      9C : 0000 0278           		dc.l TRAPException		; TRAP #07 exception				[13]
      55/      A0 : 0000 0278           		dc.l TRAPException		; TRAP #08 exception				[13]
      56/      A4 : 0000 0278           		dc.l TRAPException		; TRAP #09 exception				[13]
      57/      A8 : 0000 0278           		dc.l TRAPException		; TRAP #10 exception				[13]
      58/      AC : 0000 0278           		dc.l TRAPException		; TRAP #11 exception				[13]
      59/      B0 : 0000 0278           		dc.l TRAPException		; TRAP #12 exception				[13]
      60/      B4 : 0000 0278           		dc.l TRAPException		; TRAP #13 exception				[13]
      61/      B8 : 0000 0278           		dc.l TRAPException		; TRAP #14 exception				[13]
      62/      BC : 0000 0278           		dc.l TRAPException		; TRAP #15 exception				[13]
      63/      C0 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      64/      C4 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      65/      C8 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      66/      CC : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      67/      D0 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      68/      D4 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      69/      D8 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      70/      DC : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      71/      E0 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      72/      E4 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      73/      E8 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      74/      EC : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      75/      F0 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      76/      F4 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      77/      F8 : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      78/      FC : 0000 0282           		dc.l UnknownError		; Unused (reserved)					[14]
      79/     100 :                     
      80/     100 :                     ; ===================================================================
      81/     100 :                     ; Mega Drive ROM header (reference: https://plutiedev.com/rom-header)
      82/     100 :                     ; ===================================================================
      83/     100 :                     
      84/     100 : 5345 4741 204D 4547 		dc.b "SEGA MEGA DRIVE "										; System type - 16 bytes
              108 : 4120 4452 4956 4520
      85/     110 : 2843 2942 524F 3020 		dc.b "(C)BRO0 2025.DEC"										; Copyright, release year and month (e.g. "(C)SEGA 1991.APR") - 16 bytes
              118 : 3230 3235 2E44 4543
      86/     120 : 436F 6465 6E61 6D65 		dc.b "Codename FrankPCM: a high-tech Z80 audio driver "		; Domestic name - 48 bytes
              128 : 2046 7261 6E6B 5043
              130 : 4D3A 2061 2068 6967
              138 : 682D 7465 6368 205A
              140 : 3830 2061 7564 696F
              148 : 2064 7269 7665 7220
      87/     150 : 436F 6465 6E61 6D65 		dc.b "Codename FrankPCM: a high-tech Z80 audio driver "		; Overseas name - 48 bytes
              158 : 2046 7261 6E6B 5043
              160 : 4D3A 2061 2068 6967
              168 : 682D 7465 6368 205A
              170 : 3830 2061 7564 696F
              178 : 2064 7269 7665 7220
      88/     180 : 474D 2D31 3233 3435 		dc.b "GM-12345678-00"										; Serial number ("xx-yyyyyyyy-zz") - 14 bytes
              188 : 3637 382D 3030   
      89/     18E : 0000                		dc.w $0000													; Where this ROM gets patched with a 16-bit checksum - 2 bytes
      90/     190 : 4A20 2020 2020 2020 		dc.b "J               "										; Device support (e.g. "J" for 3-button controller) - 16 bytes
              198 : 2020 2020 2020 2020
      91/     1A0 : 0000 1200           		dc.l ROM_Start												; Start address of ROM - 4 bytes
      92/     1A4 : 003F B038           		dc.l ROM_End												; End address of ROM - 4 bytes
      93/     1A8 : 00FF 0000           		dc.l $FF0000												; Start address of WRAM - 4 bytes
      94/     1AC : 00FF FFFF           		dc.l $FFFFFF 												; End address of WRAM - 4 bytes
      95/     1B0 : 2020 2020 2020 2020 		dc.b "                                                                " ; padding for reserved space - 64 bytes
              1B8 : 2020 2020 2020 2020
              1C0 : 2020 2020 2020 2020
              1C8 : 2020 2020 2020 2020
              1D0 : 2020 2020 2020 2020
              1D8 : 2020 2020 2020 2020
              1E0 : 2020 2020 2020 2020
              1E8 : 2020 2020 2020 2020
      96/     1F0 : 4A55 20             		dc.b "JU "													; Region support - 16 bytes
      97/     1F3 : 2020 2020 2020 2020 		dc.b "             "										; padding for reserved space (you can put a comment if you want!) - 13 bytes
              1FB : 2020 2020 20      
      98/     200 :                     
      99/     200 :                     ; ========================
     100/     200 :                     ; Error handler jump table
     101/     200 :                     ; ========================
     102/     200 :                     
     103/     200 :                     BusError:
     104/     200 : 2E3C AAAA AAA1      	move.l	#$AAAAAAA1,d7
     105/     206 : 4E72 2700           	stop #$2700 ; some emulators might not recognize this instruction
     106/     20A :                     
     107/     20A :                     AddressError:
     108/     20A : 2E3C AAAA AAA2      	move.l	#$AAAAAAA2,d7
     109/     210 : 4E72 2700           	stop #$2700
     110/     214 :                     
     111/     214 :                     IllegalInstruction:
     112/     214 : 2E3C AAAA AAA3      	move.l	#$AAAAAAA3,d7
     113/     21A : 4E72 2700           	stop #$2700
     114/     21E :                     
     115/     21E :                     DivisionByZero:
     116/     21E : 2E3C AAAA AAA4      	move.l	#$AAAAAAA4,d7
     117/     224 : 4E72 2700           	stop #$2700
     118/     228 :                     
     119/     228 :                     CHKException:
     120/     228 : 2E3C AAAA AAA5      	move.l	#$AAAAAAA5,d7
     121/     22E : 4E72 2700           	stop #$2700
     122/     232 :                     
     123/     232 :                     TRAPVException:
     124/     232 : 2E3C AAAA AAA6      	move.l	#$AAAAAAA6,d7
     125/     238 : 4E72 2700           	stop #$2700
     126/     23C :                     
     127/     23C :                     PrivilegeViolation:
     128/     23C : 2E3C AAAA AAA7      	move.l	#$AAAAAAA7,d7
     129/     242 : 4E72 2700           	stop #$2700
     130/     246 :                     
     131/     246 :                     TRACEException:
     132/     246 : 2E3C AAAA AAA8      	move.l	#$AAAAAAA8,d7
     133/     24C : 4E72 2700           	stop #$2700
     134/     250 :                     
     135/     250 :                     LineAEmulator:
     136/     250 : 2E3C AAAA AAA9      	move.l	#$AAAAAAA9,d7
     137/     256 : 4E72 2700           	stop #$2700
     138/     25A :                     
     139/     25A :                     LineFEmulator:
     140/     25A : 2E3C AAAA AA10      	move.l	#$AAAAAA10,d7
     141/     260 : 4E72 2700           	stop #$2700
     142/     264 :                     
     143/     264 :                     SpuriousException:
     144/     264 : 2E3C AAAA AA11      	move.l	#$AAAAAA11,d7
     145/     26A : 4E72 2700           	stop #$2700
     146/     26E :                     
     147/     26E :                     InterruptRequest:
     148/     26E : 2E3C AAAA AA12      	move.l	#$AAAAAA12,d7
     149/     274 : 4E72 2700           	stop #$2700
     150/     278 :                     
     151/     278 :                     TRAPException:
     152/     278 : 2E3C AAAA AA13      	move.l	#$AAAAAA13,d7
     153/     27E : 4E72 2700           	stop #$2700
     154/     282 :                     
     155/     282 :                     UnknownError:
     156/     282 : 2E3C AAAA AA14      	move.l	#$AAAAAA14,d7
     157/     288 : 4E72 2700           	stop #$2700
     158/     28C :                     
     159/     28C :                     ; ==========================
     160/     28C :                     
     161/     28C :                     ; Horizontal interrupt
     162/     28C :                     VDP_HBlank:
     163/     28C : 4E73                	rte
     164/     28E :                     
     165/     28E :                     VDP_VBlank:
     166/     28E : 4E73                	rte
     167/     290 :                     
     168/     290 :                     ; ==========================
     169/     290 :                     
     170/     290 :                     EntryPoint:
     171/     290 :                     ; ============================
     172/     290 :                     ; VDP initialization and setup
     173/     290 :                     ; ============================
     174/     290 :                     
     175/     290 : 41F9 00C0 0004      	lea	VDP_CTRL,a0
     176/     296 :                     
     177/     296 : 4A50                	tst.w 	(a0) ; Testing the VDP control port safely resets it
     178/     298 :                     	
     179/     298 : 20BC 8004 8164      	move.l  #(VDPREG_MODE1|%00000100)<<16|(VDPREG_MODE2|%01100100),(a0)	; Mode register #1 and Mode register #2
     180/     29E : 20BC 8B00 8C81          move.l  #(VDPREG_MODE3|%00000000)<<16|(VDPREG_MODE4|%10000001),(a0)	; Mode register #3 and Mode Register #4
     181/     2A4 :                         
     182/     2A4 : 20BC 0038 8606          move.l  #VDPREG_PLANEA|(VRAM_PLANEA>>10)<<16|(VDPREG_PLANEB|(VRAM_PLANEB>>13)),(a0)	; Plane A and Plane B address
     183/     2AA : 20BC 0078 873F      	move.l  #VDPREG_SPRITE|(VRAM_SPRITE>>9)<<16|(VDPREG_WINDOW|(VRAM_WINDOW>>10)),(a0)	; Sprite and Window address
     184/     2B0 : 30BC 8D3F               move.w  #VDPREG_HSCROLL|(VRAM_HSCROLL>>10),(a0)										; Horizontal scroll address
     185/     2B4 :                         
     186/     2B4 : 20BC 9100 9200          move.l  #(VDPREG_WINX|$00)<<16|(VDPREG_WINY|$00),(a0)			; Window X split and Window Y split
     187/     2BA : 20BC 9001 8700          move.l  #(VDPREG_SIZE|%00000001)<<16|(VDPREG_BGCOL|$00),(a0)	; Tilemap size and Background color
     188/     2C0 : 20BC 8F02 8AFF          move.l  #(VDPREG_INCR|$02)<<16|(VDPREG_HRATE|$FF),(a0)			; Autoincrement and HBlank IRQ rate
     189/     2C6 :                     
     190/     2C6 : 47F9 00A1 1100      	lea Z80_BUSREQ,a3
     191/     2CC : 45F9 00A1 1200      	lea Z80_RESET,a2
     192/     2D2 :                     
     193/     2D2 : 343C 0100           	move.w	#$100,d2	; Assert, stop
     194/     2D6 : 7200                	moveq	#0,d1		; Deassert, start
     195/     2D8 :                     
     196/     2D8 : (MACRO)[0]          	assertZ80Reset d1,a2	; Assert reset
     196/     2D8 :                     
     196/     2D8 : 3481                                        move.w  d1,(a2)
     197/     2DA : (MACRO)[1]          	stopZ80 d2,a3			; Request bus
     197/     2DA :                     
     197/     2DA : 3682                                        move.w  d2,(a3)
     198/     2DC : (MACRO)[2]          	deassertZ80Reset d2,a2	; Release reset
     198/     2DC :                     
     198/     2DC : 3482                                        move.w  d2,(a2)
     199/     2DE :                     
     200/     2DE :                     ; We can do more stuff while the Z80 is theoretically stopping
     201/     2DE : 41F8 0302           	lea Z80RomStart,a0
     202/     2E2 : 43F9 00A0 0000      	lea Z80_WRAM,a1
     203/     2E8 : 303C 019C           	move.w	#(Z80RomEnd-Z80RomStart)-1,d0	; Mustn't go over $7F
     204/     2EC :                     
     205/     2EC :                     $$copy_program2:
     206/     2EC : 12D8                	move.b	(a0)+,(a1)+
     207/     2EE : 51C8 FFFC           	dbf d0,$$copy_program2
     208/     2F2 :                     
     209/     2F2 : (MACRO)[3]          	assertZ80Reset d2,a2	; Assert reset
     209/     2F2 :                     
     209/     2F2 : 3482                                        move.w  d2,(a2)
     210/     2F4 :                     
     211/     2F4 : 7014                	moveq	#20,d0
     212/     2F6 :                     $$wait:	; Wait for the YM2612
     213/     2F6 : 51C8 FFFE               dbf	d0,$$wait
     214/     2FA :                     
     215/     2FA : (MACRO)[4]          	deassertZ80Reset d2,a2	; Release reset
     215/     2FA :                     
     215/     2FA : 3482                                        move.w  d2,(a2)
     216/     2FC :                     
     217/     2FC : (MACRO)[5]          	startZ80 d1,a3			; Release bus
     217/     2FC :                     
     217/     2FC : 3681                                        move.w  d1,(a3)
     218/     2FE :                     
     219/     2FE : 4E72 2700           	stop	#$2700
     220/     302 :                     
     221/     302 :                     	include "Driver.z80"
(1)    1/ 302 :                         	cpu Z80
(1)    2/ 302 :                         Z80RomStart
(1)    3/ 302 :                         
(1)    4/   0 :                             phase 0	; Set label addresses to the start of the Z80 RAM
(1)    5/   0 :                         
(1)    6/   0 : 11 00 10                	ld	de,sampleBuffer
(1)    7/   3 :                         
(1)    8/   3 : 31 00 20                	ld	sp,Z80_STACK	; Align stack pointer correctly
(1)    9/   6 :                         
(1)   10/   6 : 01 00 40                	ld	bc,YM2612_CTRL0	; YM2612 bank 1 port
(1)   11/   9 : 21 01 40                	ld	hl,YM2612_DATA0	; YM2612 data port
(1)   12/   C :                         
(1)   13/   C : D9                      	exx
(1)   14/   D :                         
(1)   15/   D : 21 00 05                	ld	hl,sampleIndex_High
(1)   16/  10 : 36 00                   	ld	(hl),(Music>>16)&0FFh	; 1 byte Big-endian
(1)   17/  12 : 23                      	inc	hl
(1)   18/  13 : 36 A0                   	ld	(hl),Music&0FFh			; 2 bytes Little-endian
(1)   19/  15 : 23                      	inc	hl
(1)   20/  16 : 36 04                   	ld	(hl),(Music>>8)&0FFh
(1)   21/  18 :                         
(1)   22/  18 : 11 00 60                	ld	de,Z80BUS_BANK
(1)   23/  1B :                         
(1)   24/  1B : 3A 02 05                	ld	a,(sampleIndex_Low+1)
(1)   25/  1E : 07                      	rlca
(1)   26/  1F : 12                      	ld	(de),a
(1)   27/  20 :                         
(1)   28/  20 : 3A 00 05                	ld	a,(sampleIndex_High)
(1)   29/  23 : 06 08                   	ld	b,8
(1)   30/  25 :                         $$bank_init:
(1)   31/  25 : 12                      	ld	(de),a
(1)   32/  26 : 0F                      	rrca
(1)   33/  27 : 10 FC                   	djnz $$bank_init
(1)   34/  29 :                         
(1)   35/  29 : ED 56                   	im	1
(1)   36/  2B : F3                      	di
(1)   37/  2C :                         
(1)   38/  2C : C3 79 01                	jp	$$BufferInit
(1)   39/  2F :                         
(1)   40/  38 :                         	rorg 38h - $	; Can't use ORG while mapping labels to Z80 RAM
(1)   41/  38 :                         ; VDP VBlank
(1)   42/  38 : CB 7C                   	bit	7,h
(1)   43/  3A : 20 06                   	jr	nz,$$hl_is_bank
(1)   44/  3C : 1A                      	ld	a,(de)				; 7
(1)   45/  3D : 77                      	ld	(hl),a				; 7
(1)   46/  3E : 13                      	inc	de					; 6
(1)   47/  3F : C3 46 00                	jp	$$continue
(1)   48/  42 :                         $$hl_is_bank:
(1)   49/  42 : D9                      	exx
(1)   50/  43 : 1A                      	ld	a,(de)				; 7
(1)   51/  44 : 77                      	ld	(hl),a				; 7
(1)   52/  45 : 13                      	inc	de					; 6
(1)   53/  46 :                         $$continue:
(1)   54/  46 : D9                      	exx
(1)   55/  47 : CB 45                   	bit	0,l
(1)   56/  49 : 28 04                   	jr	z,$$skip_alignment
(1)   57/  4B : 7E                      	ld	a,(hl)
(1)   58/  4C : 12                      	ld	(de),a
(1)   59/  4D : 23                      	inc	hl
(1)   60/  4E : 13                      	inc	de
(1)   61/  4F :                         $$skip_alignment:
(1)   62/  4F : 7E                      	ld	a,(hl)
(1)   63/  50 : 12                      	ld	(de),a
(1)   64/  51 : 23                      	inc	hl
(1)   65/  52 : 13                      	inc	de
(1)   66/  53 : 7E                      	ld	a,(hl)
(1)   67/  54 : 12                      	ld	(de),a
(1)   68/  55 : 23                      	inc	hl
(1)   69/  56 : 13                      	inc	de
(1)   70/  57 : 7E                      	ld	a,(hl)
(1)   71/  58 : 12                      	ld	(de),a
(1)   72/  59 : 23                      	inc	hl
(1)   73/  5A : 13                      	inc	de
(1)   74/  5B : 7E                      	ld	a,(hl)
(1)   75/  5C : 12                      	ld	(de),a
(1)   76/  5D : 23                      	inc	hl
(1)   77/  5E : 13                      	inc	de
(1)   78/  5F :                         
(1)   79/  5F :                         	; Preserve bit 15 from old sampleIndex_Low
(1)   80/  5F : 01 02 05                	ld	bc,sampleIndex_Low+1
(1)   81/  62 : 0A                      	ld	a,(bc)
(1)   82/  63 : 22 01 05                	ld	(sampleIndex_Low),hl
(1)   83/  66 : E6 80                   	and	80h
(1)   84/  68 : CB BC                   	res	7,h
(1)   85/  6A : B4                      	or	h
(1)   86/  6B : 02                      	ld	(bc),a
(1)   87/  6C :                         
(1)   88/  6C : 11 00 10                	ld	de,sampleBuffer
(1)   89/  6F : 31 00 20                	ld	sp,Z80_STACK
(1)   90/  72 :                         	
(1)   91/  72 : D9                      	exx
(1)   92/  73 :                         
(1)   93/  73 : 11 00 10                	ld	de,sampleBuffer
(1)   94/  76 :                         
(1)   95/  76 : 06 40                   	ld	b,64	; Guard ~2 ms of delay to get out of VBlank (which is 1.4â€“1.6 ms)
(1)   96/  78 :                         $$loop_DacOnly:
(1)   97/  78 : 1A                      	ld	a,(de)
(1)   98/  79 : 77                      	ld	(hl),a
(1)   99/  7A : 13                      	inc de
(1)  100/  7B : FE 00                   	cp	0
(1)  101/  7D : FE 00                   	cp	0
(1)  102/  7F :                         	rept 16
(1)  103/  7F :                         	nop
(1)  104/  7F :                         	endm
(1)  103/  7F : 00                      	nop
(1)  103/  80 : 00                      	nop
(1)  103/  81 : 00                      	nop
(1)  103/  82 : 00                      	nop
(1)  103/  83 : 00                      	nop
(1)  103/  84 : 00                      	nop
(1)  103/  85 : 00                      	nop
(1)  103/  86 : 00                      	nop
(1)  103/  87 : 00                      	nop
(1)  103/  88 : 00                      	nop
(1)  103/  89 : 00                      	nop
(1)  103/  8A : 00                      	nop
(1)  103/  8B : 00                      	nop
(1)  103/  8C : 00                      	nop
(1)  103/  8D : 00                      	nop
(1)  103/  8E : 00                      	nop
(1)  105/  8F : 10 E7                   	djnz $$loop_DacOnly
(1)  106/  91 :                         
(1)  107/  91 : FB                      	ei
(1)  108/  92 :                         
(1)  109/  92 : 1A                      	ld	a,(de)
(1)  110/  93 : 77                      	ld	(hl),a
(1)  111/  94 : 13                      	inc de
(1)  112/  95 :                         
(1)  113/  95 :                         	rept 26
(1)  114/  95 :                         	nop
(1)  115/  95 :                         	endm
(1)  114/  95 : 00                      	nop
(1)  114/  96 : 00                      	nop
(1)  114/  97 : 00                      	nop
(1)  114/  98 : 00                      	nop
(1)  114/  99 : 00                      	nop
(1)  114/  9A : 00                      	nop
(1)  114/  9B : 00                      	nop
(1)  114/  9C : 00                      	nop
(1)  114/  9D : 00                      	nop
(1)  114/  9E : 00                      	nop
(1)  114/  9F : 00                      	nop
(1)  114/  A0 : 00                      	nop
(1)  114/  A1 : 00                      	nop
(1)  114/  A2 : 00                      	nop
(1)  114/  A3 : 00                      	nop
(1)  114/  A4 : 00                      	nop
(1)  114/  A5 : 00                      	nop
(1)  114/  A6 : 00                      	nop
(1)  114/  A7 : 00                      	nop
(1)  114/  A8 : 00                      	nop
(1)  114/  A9 : 00                      	nop
(1)  114/  AA : 00                      	nop
(1)  114/  AB : 00                      	nop
(1)  114/  AC : 00                      	nop
(1)  114/  AD : 00                      	nop
(1)  114/  AE : 00                      	nop
(1)  116/  AF :                         
(1)  117/  AF : 06 98                   	ld	b,152
(1)  118/  B1 :                         $$loop_YmAndDac:
(1)  119/  B1 : 1A                      	ld	a,(de)
(1)  120/  B2 : 77                      	ld	(hl),a
(1)  121/  B3 : 13                      	inc de
(1)  122/  B4 : FE 00                   	cp	0
(1)  123/  B6 : FE 00                   	cp	0
(1)  124/  B8 :                         	rept 16
(1)  125/  B8 :                         	nop
(1)  126/  B8 :                         	endm
(1)  125/  B8 : 00                      	nop
(1)  125/  B9 : 00                      	nop
(1)  125/  BA : 00                      	nop
(1)  125/  BB : 00                      	nop
(1)  125/  BC : 00                      	nop
(1)  125/  BD : 00                      	nop
(1)  125/  BE : 00                      	nop
(1)  125/  BF : 00                      	nop
(1)  125/  C0 : 00                      	nop
(1)  125/  C1 : 00                      	nop
(1)  125/  C2 : 00                      	nop
(1)  125/  C3 : 00                      	nop
(1)  125/  C4 : 00                      	nop
(1)  125/  C5 : 00                      	nop
(1)  125/  C6 : 00                      	nop
(1)  125/  C7 : 00                      	nop
(1)  127/  C8 : 10 E7                   	djnz $$loop_YmAndDac
(1)  128/  CA : 00                      	nop
(1)  129/  CB : 1A                      	ld	a,(de)
(1)  130/  CC : 77                      	ld	(hl),a
(1)  131/  CD : 13                      	inc de
(1)  132/  CE :                         
(1)  133/  CE :                         	rept 26
(1)  134/  CE :                         	nop
(1)  135/  CE :                         	endm
(1)  134/  CE : 00                      	nop
(1)  134/  CF : 00                      	nop
(1)  134/  D0 : 00                      	nop
(1)  134/  D1 : 00                      	nop
(1)  134/  D2 : 00                      	nop
(1)  134/  D3 : 00                      	nop
(1)  134/  D4 : 00                      	nop
(1)  134/  D5 : 00                      	nop
(1)  134/  D6 : 00                      	nop
(1)  134/  D7 : 00                      	nop
(1)  134/  D8 : 00                      	nop
(1)  134/  D9 : 00                      	nop
(1)  134/  DA : 00                      	nop
(1)  134/  DB : 00                      	nop
(1)  134/  DC : 00                      	nop
(1)  134/  DD : 00                      	nop
(1)  134/  DE : 00                      	nop
(1)  134/  DF : 00                      	nop
(1)  134/  E0 : 00                      	nop
(1)  134/  E1 : 00                      	nop
(1)  134/  E2 : 00                      	nop
(1)  134/  E3 : 00                      	nop
(1)  134/  E4 : 00                      	nop
(1)  134/  E5 : 00                      	nop
(1)  134/  E6 : 00                      	nop
(1)  134/  E7 : 00                      	nop
(1)  136/  E8 :                         
(1)  137/  E8 : 06 20                   	ld	b,32
(1)  138/  EA :                         $$loop_SnAndDac:
(1)  139/  EA : 1A                      	ld	a,(de)
(1)  140/  EB : 77                      	ld	(hl),a
(1)  141/  EC : 13                      	inc de
(1)  142/  ED : FE 00                   	cp	0
(1)  143/  EF : FE 00                   	cp	0
(1)  144/  F1 :                         	rept 16
(1)  145/  F1 :                         	nop
(1)  146/  F1 :                         	endm
(1)  145/  F1 : 00                      	nop
(1)  145/  F2 : 00                      	nop
(1)  145/  F3 : 00                      	nop
(1)  145/  F4 : 00                      	nop
(1)  145/  F5 : 00                      	nop
(1)  145/  F6 : 00                      	nop
(1)  145/  F7 : 00                      	nop
(1)  145/  F8 : 00                      	nop
(1)  145/  F9 : 00                      	nop
(1)  145/  FA : 00                      	nop
(1)  145/  FB : 00                      	nop
(1)  145/  FC : 00                      	nop
(1)  145/  FD : 00                      	nop
(1)  145/  FE : 00                      	nop
(1)  145/  FF : 00                      	nop
(1)  145/ 100 : 00                      	nop
(1)  147/ 101 : 10 E7                   	djnz $$loop_SnAndDac
(1)  148/ 103 : 00                      	nop
(1)  149/ 104 : 1A                      	ld	a,(de)
(1)  150/ 105 : 77                      	ld	(hl),a
(1)  151/ 106 : 13                      	inc de
(1)  152/ 107 :                         
(1)  153/ 107 : D5                      	push de
(1)  154/ 108 : D9                      	exx
(1)  155/ 109 : E1                      	pop hl	; LD HL,DE'
(1)  156/ 10A :                         
(1)  157/ 10A : B7                      	or	a	; Clear carry flag
(1)  158/ 10B : ED 52                   	sbc	hl,de
(1)  159/ 10D : 2D                      	dec	l
(1)  160/ 10E : 45                      	ld	b,l
(1)  161/ 10F :                         
(1)  162/ 10F : 11 00 10                	ld	de,sampleBuffer
(1)  163/ 112 : 2A 01 05                	ld	hl,(sampleIndex_Low)
(1)  164/ 115 : CB FC                   	set	7,h
(1)  165/ 117 :                         	; We have to make sure HL is even here
(1)  166/ 117 :                         $$LoadBuffer_2x:
(1)  167/ 117 : D9                      	exx						; 4
(1)  168/ 118 : 1A                      	ld	a,(de)				; 7
(1)  169/ 119 : 77                      	ld	(hl),a				; 7
(1)  170/ 11A : 13                      	inc	de					; 6
(1)  171/ 11B : D9                      	exx						; 4
(1)  172/ 11C : 7E                      	ld	a,(hl)				; 7
(1)  173/ 11D : 12                      	ld	(de),a				; 7
(1)  174/ 11E : 23                      	inc	hl					; 6
(1)  175/ 11F : 13                      	inc	de					; 6
(1)  176/ 120 : 7E                      	ld	a,(hl)				; 7
(1)  177/ 121 : 12                      	ld	(de),a				; 7
(1)  178/ 122 : 23                      	inc	hl					; 6
(1)  179/ 123 : 13                      	inc	de					; 6
(1)  180/ 124 : CB 7C                   	bit	7,h					; 8
(1)  181/ 126 : CC 45 01                	call z,$$NextBank		; 10
(1)  182/ 129 : 10 EC                   	djnz $$LoadBuffer_2x	; 13
(1)  183/ 12B :                         	; 111 cycles
(1)  184/ 12B : 00                      	nop
(1)  185/ 12C :                         $$LoadBuffer_1x:
(1)  186/ 12C : D9                      	exx						; 4
(1)  187/ 12D : 1A                      	ld	a,(de)				; 7
(1)  188/ 12E : 77                      	ld	(hl),a				; 7
(1)  189/ 12F : 13                      	inc	de					; 6
(1)  190/ 130 : D9                      	exx						; 4
(1)  191/ 131 : 7E                      	ld	a,(hl)				; 7
(1)  192/ 132 : 12                      	ld	(de),a				; 7
(1)  193/ 133 : 23                      	inc	hl					; 6
(1)  194/ 134 : 13                      	inc	de					; 6
(1)  195/ 135 : FE 00                   	cp	0					; 7	
(1)  196/ 137 : FE 00                   	cp	0					; 7
(1)  197/ 139 : FE 00                   	cp	0					; 7
(1)  198/ 13B : 00                      	nop						; 4
(1)  199/ 13C : 00                      	nop						; 4
(1)  200/ 13D : CB 7C                   	bit	7,h					; 8
(1)  201/ 13F : CC 45 01                	call z,$$NextBank		; 10
(1)  202/ 142 : C3 2C 01                	jp	$$LoadBuffer_1x		; 10
(1)  203/ 145 :                         
(1)  204/ 145 :                         $$NextBank:
(1)  205/ 145 : F3                      	di							; 4
(1)  206/ 146 :                         
(1)  207/ 146 : 08                      	ex	af,af'
(1)  208/ 147 : 78                      	ld	a,b
(1)  209/ 148 : 08                      	ex	af,af'
(1)  210/ 149 :                         
(1)  211/ 149 : 01 02 05                	ld	bc,sampleIndex_Low+1	; 10
(1)  212/ 14C : 0A                      	ld	a,(bc)					; 7
(1)  213/ 14D : C6 80                   	add	80h						; 7
(1)  214/ 14F : 02                      	ld	(bc),a					; 7
(1)  215/ 150 :                         
(1)  216/ 150 : 01 00 60                	ld	bc,Z80BUS_BANK			; 10
(1)  217/ 153 :                         
(1)  218/ 153 : 07                      	rlca						; 4 (overwrites carry with the opposite one)
(1)  219/ 154 : 02                      	ld	(bc),a					; 7
(1)  220/ 155 : 3F                      	ccf			; Invert carry because it's using the one from the 7th bit
(1)  221/ 156 :                         
(1)  222/ 156 : D9                      	exx							; 4
(1)  223/ 157 : 1A                      	ld	a,(de)					; 7
(1)  224/ 158 : 77                      	ld	(hl),a					; 7
(1)  225/ 159 : 13                      	inc	de						; 6
(1)  226/ 15A : D9                      	exx							; 4
(1)  227/ 15B :                         
(1)  228/ 15B : 3A 00 05                	ld	a,(sampleIndex_High)	; 13
(1)  229/ 15E : 8C                      	adc	a,h						; 4 (H is always zero here)
(1)  230/ 15F : 32 00 05                	ld	(sampleIndex_High),a	; 13
(1)  231/ 162 :                         
(1)  232/ 162 : 02                      	ld	(bc),a					; 7
(1)  233/ 163 : 0F                      	rrca						; 4
(1)  234/ 164 : 02                      	ld	(bc),a					; 7
(1)  235/ 165 : 0F                      	rrca						; 4
(1)  236/ 166 : 02                      	ld	(bc),a					; 7
(1)  237/ 167 : 0F                      	rrca						; 4
(1)  238/ 168 : 02                      	ld	(bc),a					; 7
(1)  239/ 169 : 0F                      	rrca						; 4
(1)  240/ 16A : 02                      	ld	(bc),a					; 7
(1)  241/ 16B : 0F                      	rrca						; 4
(1)  242/ 16C : 02                      	ld	(bc),a					; 7
(1)  243/ 16D : 0F                      	rrca						; 4
(1)  244/ 16E : 02                      	ld	(bc),a					; 7
(1)  245/ 16F : 0F                      	rrca						; 4
(1)  246/ 170 : 02                      	ld	(bc),a					; 7
(1)  247/ 171 : 21 00 80                	ld	hl,Z80BUS_WINDOW		; 10
(1)  248/ 174 :                         
(1)  249/ 174 : FB                      	ei							; 4
(1)  250/ 175 : 08                      	ex	af,af'
(1)  251/ 176 : 78                      	ld	a,b
(1)  252/ 177 : 08                      	ex	af,af'
(1)  253/ 178 : C9                      	ret
(1)  254/ 179 :                         
(1)  255/ 179 :                         ;$$Loop_EndSoundInit:
(1)  256/ 179 :                         ;	ld	c,00h	; Second byte
(1)  257/ 179 :                         ;	ld	b,00h	; First byte
(1)  258/ 179 :                         ;$$loop_endSound1:
(1)  259/ 179 :                         ;	ld	a,(de)
(1)  260/ 179 :                         ;	ld	(hl),a
(1)  261/ 179 :                         ;	rept 16
(1)  262/ 179 :                         ;	nop
(1)  263/ 179 :                         ;	endm
(1)  264/ 179 :                         ;	inc	e
(1)  265/ 179 :                         ;	inc de
(1)  266/ 179 :                         ;	dec	bc
(1)  267/ 179 :                         ;	ld	a,b
(1)  268/ 179 :                         ;	or	c
(1)  269/ 179 :                         ;	jp	nz,$$loop_endSound1
(1)  270/ 179 :                         
(1)  271/ 179 :                         $$BufferInit:
(1)  272/ 179 : 06 FF                   	ld	b,0FFh
(1)  273/ 17B : 11 00 10                	ld	de,sampleBuffer
(1)  274/ 17E : 2A 01 05                	ld	hl,(sampleIndex_Low)
(1)  275/ 181 : CB FC                   	set	7,h
(1)  276/ 183 :                         $$bufferInit_loop:
(1)  277/ 183 : 7E                      	ld	a,(hl)
(1)  278/ 184 : 12                      	ld	(de),a
(1)  279/ 185 : 23                      	inc	hl
(1)  280/ 186 : 13                      	inc	de
(1)  281/ 187 : 7E                      	ld	a,(hl)
(1)  282/ 188 : 12                      	ld	(de),a
(1)  283/ 189 : 23                      	inc	hl
(1)  284/ 18A : 13                      	inc	de
(1)  285/ 18B : 7C                      	ld	a,h
(1)  286/ 18C : B7                      	or	a
(1)  287/ 18D : CC 79 01                	call z,$$BufferInit
(1)  288/ 190 : 10 F1                   	djnz $$bufferInit_loop
(1)  289/ 192 :                         
(1)  290/ 192 : D9                      	exx
(1)  291/ 193 :                         
(1)  292/ 193 : 3E 2B                   	ld	a,DAC_ENABLE	; DAC enable address
(1)  293/ 195 : 02                      	ld	(bc),a			; Switch to DAC enable register
(1)  294/ 196 : 36 80                   	ld	(hl),80h		; Enable DAC
(1)  295/ 198 : 3D                      	dec	a				; Now a is 2Ah (DAC_IN)
(1)  296/ 199 : 02                      	ld	(bc),a			; Switch to DAC data input
(1)  297/ 19A :                         
(1)  298/ 19A : D9                      	exx
(1)  299/ 19B :                         
(1)  300/ 19B : FB                      	ei
(1)  301/ 19C : 76                      	halt
(1)  302/ 19D :                         
(1)  303/ 49F :                             dephase	; The rest of the labels are mapped normally
(1)  304/ 49F :                         
(1)  305/     49F :                     	cpu 68000
(1)  306/     49F :                     
(1)  307/     49F :                     Z80RomEnd
     222/     49F :                     
     223/     49F :                     	align 2	; Even out the PC
     224/     4A0 :                     Music:
     225/     4A0 :                     	;binclude "continuity_test.bin" ; For debugging: test with increasing bytes to make sure no samples get skipped
     226/     4A0 :                     	;binclude "24. Time Rift Shift ~ Vs. Metal Sonic.raw" ; Great music right here
     227/     4A0 :                     	binclude "Don't Stand So Close To Me.raw" ; Another banger
     228/  3FB038 :                     	;binclude "music.pcm" ; Let's not talk about this
     229/  3FB038 :                     	;binclude "My Summary.raw"
     230/  3FB038 :                     
     231/  3FB038 :                     ROM_End
 AS V1.42 Beta [Bld 298] - Source File Sonic.68k - Page 2 - 1/6/2026 16:4:10


  Symbol Table (* = unused):
  --------------------------

*ARCHITECTURE :                                        "i386-unknown-win32" - |
 AddressError :                 20A C |  BufferInit244 :                179 C |
 BusError :                     200 C | *CASESENSITIVE :                  1 - |
*CH1_4_ALG_FB :                  B0 - | *CH1_4_FREQ_H :                  A4 - |
*CH1_4_FREQ_L :                  A0 - | *CH1_4_OP1_AR_RS :               50 - |
*CH1_4_OP1_DR_AM :               60 - | *CH1_4_OP1_MUL_DT :              30 - |
*CH1_4_OP1_RR_SL :               80 - | *CH1_4_OP1_SR :                  70 - |
*CH1_4_OP1_SSG_EG :              90 - | *CH1_4_OP1_TL :                  40 - |
*CH1_4_OP2_AR_RS :               58 - | *CH1_4_OP2_DR_AM :               68 - |
*CH1_4_OP2_MUL_DT :              38 - | *CH1_4_OP2_RR_SL :               88 - |
*CH1_4_OP2_SR :                  78 - | *CH1_4_OP2_SSG_EG :              98 - |
*CH1_4_OP2_TL :                  48 - | *CH1_4_OP3_AR_RS :               54 - |
*CH1_4_OP3_DR_AM :               64 - | *CH1_4_OP3_MUL_DT :              34 - |
*CH1_4_OP3_RR_SL :               84 - | *CH1_4_OP3_SR :                  74 - |
*CH1_4_OP3_SSG_EG :              94 - | *CH1_4_OP3_TL :                  44 - |
*CH1_4_OP4_AR_RS :               5C - | *CH1_4_OP4_DR_AM :               6C - |
*CH1_4_OP4_MUL_DT :              3C - | *CH1_4_OP4_RR_SL :               8C - |
*CH1_4_OP4_SR :                  7C - | *CH1_4_OP4_SSG_EG :              9C - |
*CH1_4_OP4_TL :                  4C - | *CH1_4_PAN_PMS_AMS :             B4 - |
*CH2_5_ALG_FB :                  B1 - | *CH2_5_FREQ_H :                  A5 - |
*CH2_5_FREQ_L :                  A1 - | *CH2_5_OP1_AR_RS :               51 - |
*CH2_5_OP1_DR_AM :               61 - | *CH2_5_OP1_MUL_DT :              31 - |
*CH2_5_OP1_RR_SL :               81 - | *CH2_5_OP1_SR :                  71 - |
*CH2_5_OP1_SSG_EG :              91 - | *CH2_5_OP1_TL :                  41 - |
*CH2_5_OP2_AR_RS :               59 - | *CH2_5_OP2_DR_AM :               69 - |
*CH2_5_OP2_MUL_DT :              39 - | *CH2_5_OP2_RR_SL :               89 - |
*CH2_5_OP2_SR :                  79 - | *CH2_5_OP2_SSG_EG :              99 - |
*CH2_5_OP2_TL :                  49 - | *CH2_5_OP3_AR_RS :               55 - |
*CH2_5_OP3_DR_AM :               65 - | *CH2_5_OP3_MUL_DT :              35 - |
*CH2_5_OP3_RR_SL :               85 - | *CH2_5_OP3_SR :                  75 - |
*CH2_5_OP3_SSG_EG :              95 - | *CH2_5_OP3_TL :                  45 - |
*CH2_5_OP4_AR_RS :               5D - | *CH2_5_OP4_DR_AM :               6D - |
*CH2_5_OP4_MUL_DT :              3D - | *CH2_5_OP4_RR_SL :               8D - |
*CH2_5_OP4_SR :                  7D - | *CH2_5_OP4_SSG_EG :              9D - |
*CH2_5_OP4_TL :                  4D - | *CH2_5_PAN_PMS_AMS :             B5 - |
*CH3_6_ALG_FB :                  B2 - | *CH3_6_FREQ_H :                  A6 - |
*CH3_6_FREQ_L :                  A2 - | *CH3_6_OP1_AR_RS :               52 - |
*CH3_6_OP1_DR_AM :               62 - | *CH3_6_OP1_MUL_DT :              32 - |
*CH3_6_OP1_RR_SL :               82 - | *CH3_6_OP1_SR :                  72 - |
*CH3_6_OP1_SSG_EG :              92 - | *CH3_6_OP1_TL :                  42 - |
*CH3_6_OP2_AR_RS :               5A - | *CH3_6_OP2_DR_AM :               6A - |
*CH3_6_OP2_MUL_DT :              3A - | *CH3_6_OP2_RR_SL :               8A - |
*CH3_6_OP2_SR :                  7A - | *CH3_6_OP2_SSG_EG :              9A - |
*CH3_6_OP2_TL :                  4A - | *CH3_6_OP3_AR_RS :               56 - |
*CH3_6_OP3_DR_AM :               66 - | *CH3_6_OP3_MUL_DT :              36 - |
*CH3_6_OP3_RR_SL :               86 - | *CH3_6_OP3_SR :                  76 - |
*CH3_6_OP3_SSG_EG :              96 - | *CH3_6_OP3_TL :                  46 - |
*CH3_6_OP4_AR_RS :               5E - | *CH3_6_OP4_DR_AM :               6E - |
*CH3_6_OP4_MUL_DT :              3E - | *CH3_6_OP4_RR_SL :               8E - |
*CH3_6_OP4_SR :                  7E - | *CH3_6_OP4_SSG_EG :              9E - |
*CH3_6_OP4_TL :                  4E - | *CH3_6_PAN_PMS_AMS :             B6 - |
*CH3_OP1_FREQ_H :                AD - | *CH3_OP1_FREQ_L :                A9 - |
*CH3_OP2_FREQ_H :                AE - | *CH3_OP2_FREQ_L :                AA - |
*CH3_OP3_FREQ_H :                AC - | *CH3_OP3_FREQ_L :                A8 - |
*CH3_OP4_FREQ_H :                A6 - | *CH3_OP4_FREQ_L :                A2 - |
*CH3_TIMERCTRL :                 27 - |  CHKException :                 228 C |
*CONSTPI :        3.141592653589793 - |  DAC_ENABLE :                    2B - |
*DAC_OUT :                       2A - | *DATE :                  "1/6/2026" - |
 DivisionByZero :               21E C | *EXP_CTRL :                  A1000D - |
*EXP_DATA :                  A10006 - | *EXP_SER_CTRL :              A1001E - |
*EXP_SER_REC :               A1001C - | *EXP_SER_TRAN :              A1001A - |
 EntryPoint :                   290 C | *FALSE :                          0 - |
*FLOATMAX :      1.797693134866E308 - | *FULLPMMU :                       1 - |
*HAS64 :                          1 - | *HASFPU :                         0 - |
*HASPMMU :                        0 - | *HFLIP :                        800 - |
*HIPRI :                       8000 - | *HVFLIP :                      1800 - |
*INSUPMODE :                      1 - | *INTWIDTH :                      40 - |
 IllegalInstruction :           214 C |  InterruptRequest :             26E C |
*JOY1_CTRL :                 A10009 - | *JOY1_DATA :                 A10003 - |
*JOY1_SER_CTRL :             A10012 - | *JOY1_SER_REC :              A10010 - |
*JOY1_SER_TRAN :             A1000E - | *JOY2_CTRL :                 A10005 - |
*JOY2_DATA :                 A1000B - | *JOY2_SER_CTRL :             A10018 - |
*JOY2_SER_REC :              A10016 - | *JOY2_SER_TRAN :             A10014 - |
*JOY_B :                          4 - | *JOY_C :                          5 - |
*JOY_D :                          1 - | *JOY_L :                          2 - |
*JOY_R :                          3 - | *JOY_U :                          0 - |
*KEY_ON_OFF :                    28 - | *LFO_ENABLE :                    22 - |
*LISTON :                         3 - | *LOPRI :                          0 - |
 LineAEmulator :                250 C |  LineFEmulator :                25A C |
 LoadBuffer_1x244 :             12C C |  LoadBuffer_2x244 :             117 C |
 M68K_STACK :                FF0000 - | *M68K_WRAM :                 FF0000 - |
*MACEXP :                         7 - | *MOMCPU :                     68000 - |
 MOMCPUNAME :               "68000" - |  Music :                        4A0 C |
*NESTMAX :                      100 - | *NOFLIP :                         0 - |
 NextBank244 :                  145 C | *PADDING :                        1 - |
*PAL0 :                           0 - | *PAL1 :                        2000 - |
*PAL2 :                        4000 - | *PAL3 :                        6000 - |
*PSG_OUT :                   C00011 - |  PrivilegeViolation :           23C C |
*REG_32X :                   A130EC - | *REG_MEMORYMODE :            A11000 - |
*REG_SRAM :                  A130F1 - | *REG_TIME :                  A13000 - |
*REG_TMSS :                  A14000 - | *REG_TMSS_CART :             A14101 - |
*REG_VERSION :               A10001 - | *RELAXED :                        0 - |
 ROM_End :                   3FB038 C |  ROM_Start :                   1200 C |
*SIZE_CRAM :                     80 - | *SIZE_VRAM :                   FFFF - |
*SIZE_VSRAM :                    50 - | *SIZE_WRAM :                   FFFF - |
*SIZE_Z80WRAM :                2000 - |  SpuriousException :            264 C |
*TIME :                   "16:4:10" - | *TIMER_A_H :                     24 - |
*TIMER_A_L :                     25 - | *TIMER_B :                       26 - |
 TRACEException :               246 C |  TRAPException :                278 C |
 TRAPVException :               232 C | *TRUE :                           1 - |
 UnknownError :                 282 C |  VDPREG_BGCOL :                8700 - |
*VDPREG_DMALEN_H :             9400 - | *VDPREG_DMALEN_L :             9300 - |
*VDPREG_DMASRC_H :             9700 - | *VDPREG_DMASRC_L :             9500 - |
*VDPREG_DMASRC_M :             9600 - |  VDPREG_HRATE :                8A00 - |
 VDPREG_HSCROLL :              8D00 - |  VDPREG_INCR :                 8F00 - |
 VDPREG_MODE1 :                8000 - |  VDPREG_MODE2 :                8100 - |
 VDPREG_MODE3 :                8B00 - |  VDPREG_MODE4 :                8C00 - |
 VDPREG_PLANEA :               8200 - |  VDPREG_PLANEB :               8400 - |
 VDPREG_SIZE :                 9000 - |  VDPREG_SPRITE :               8500 - |
 VDPREG_WINDOW :               8300 - |  VDPREG_WINX :                 9100 - |
 VDPREG_WINY :                 9200 - | *VDP_CRAM :                C0000000 - |
*VDP_CRAM_DMA :            C0000080 - |  VDP_CTRL :                  C00004 - |
*VDP_DATA :                  C00000 - | *VDP_DEBUG :                 C0001C - |
 VDP_HBlank :                   28C C | *VDP_HVCOUNTER :             C00008 - |
 VDP_VBlank :                   28E C | *VDP_VRAM :                40000000 - |
*VDP_VRAM_DMA :            40000080 - | *VDP_VSRAM :               40000010 - |
*VDP_VSRAM_DMA :           40000090 - | *VERSION :                     142F - |
*VFLIP :                       1000 - |  VRAM_HSCROLL :                FFFF - |
 VRAM_PLANEA :                 E000 - |  VRAM_PLANEB :                 C000 - |
 VRAM_SPRITE :                 F000 - |  VRAM_WINDOW :                 FFFF - |
*WARNRELATIVE :                   0 - | *WRAM_Code :               FFFF0000 C |
*YM2612_68K_CTRL0 :          A04000 - | *YM2612_68K_CTRL1 :          A04002 - |
*YM2612_68K_DATA0 :          A04001 - | *YM2612_68K_DATA1 :          A04003 - |
 YM2612_CTRL0 :                4000 - | *YM2612_CTRL1 :                4002 - |
 YM2612_DATA0 :                4001 - | *YM2612_DATA1 :                4003 - |
*Z80BUFFER_SIZE :               1F4 - |  Z80BUS_BANK :                 6000 - |
 Z80BUS_WINDOW :               8000 - |  Z80RomEnd :                    49F C |
 Z80RomStart :                  302 C |  Z80_BUSREQ :                A11100 - |
 Z80_RESET :                 A11200 - |  Z80_STACK :                   2000 - |
 Z80_WRAM :                  A00000 - |  bank_init244 :                  25 C |
 bufferInit_loop244 :           183 C |  continue244 :                   46 C |
 copy_program2241 :             2EC C |  hl_is_bank244 :                 42 C |
 loop_DacOnly244 :               78 C |  loop_SnAndDac244 :              EA C |
 loop_YmAndDac244 :              B1 C |  sampleBuffer :                1000 C |
 sampleIndex_High :             500 C |  sampleIndex_Low :              501 C |
 skip_alignment244 :             4F C |  wait241 :                      2F6 C |

    271 symbols
    200 unused symbols

 AS V1.42 Beta [Bld 298] - Source File Sonic.68k - Page 3 - 1/6/2026 16:4:10


  Defined Macros:
  ---------------

addaq                                 | assertZ80Reset                       
deassertZ80Reset                      | startZ80                             
stopZ80                               | subaq                                
waitZ80                               |

      7 macros

 AS V1.42 Beta [Bld 298] - Source File Sonic.68k - Page 4 - 1/6/2026 16:4:10


  Defined Functions:
  ------------------

notaddressregister                    | notdataregister                      

 AS V1.42 Beta [Bld 298] - Source File Sonic.68k - Page 5 - 1/6/2026 16:4:10


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.04 seconds assembly time

   1028 lines source file
   1254 lines incl. macro expansions
      2 passes
      0 errors
      0 warnings
